<link rel="import" href="../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-from-bottom-animation.html">
<link rel="import" href="../bower_components/neon-animation/animations/slide-down-animation.html">

<dom-module id="x-shade">
  <template>
    <style>
      :host {
        display: block;
        @apply(--layout-fit);
      }
    </style>

    <content></content>
  </template>
  <script>
    Polymer({
      is: 'x-shade',
      behaviors: Polymer.NeonAnimationRunnerBehavior,
      properties: {
        active: {
          type: Boolean,
          observer: '_activeChanged'
        },
        entryAnimation: {
          type: String,
          value: 'slide-from-bottom-animation'
        },
        exitAnimation: {
          type: String,
          value: 'slide-down-animation'
        }
      },
      listeners: {
        'neon-animation-finish': '_animationFinished'
      },
      ready: function() {
        this._t0 = Date.now();
      },
      _hide: function() {
        if (Date.now() - 1000 > this._t0) {
          this['playAnimation']('exit');
        } else {
          this.style.display = 'none';
        }
      },
      _show: function() {
        this.style.display = 'block';
        if (Date.now() - 1000 > this._t0) {
          this['playAnimation']('entry');
        }
      },
      _animationFinished: function() {
        if (!this.active) {
          this.style.display = 'none';
        }
      },
      _activeChanged: function() {
        this.active ? this._show() : this._hide();
      }
    });
  </script>
</dom-module>
